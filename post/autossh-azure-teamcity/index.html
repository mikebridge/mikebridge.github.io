<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Wormhole!  Tunnel a Firewalled Machine Onto the Web via Azure - Mike Bridge - Dev Notes</title>
  <meta property="og:title" content="Wormhole!  Tunnel a Firewalled Machine Onto the Web via Azure" />
  <meta name="twitter:title" content="Wormhole!  Tunnel a Firewalled Machine Onto the Web via Azure" />
  <meta name="description" content="Make a web site that exists behind a firewall (or other service) available to the internet.">
  <meta property="og:description" content="Make a web site that exists behind a firewall (or other service) available to the internet.">
  <meta name="twitter:description" content="Make a web site that exists behind a firewall (or other service) available to the internet.">
  <meta name="author" content="Mike Bridge"/><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Mike Bridge - Dev Notes",
    
    "url": "https://mikebridge.github.io"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https://mikebridge.github.io"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https://mikebridge.github.io",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https://mikebridge.github.io/post/autossh-azure-teamcity/",
          "name": "Wormhole! tunnel a firewalled machine onto the web via azure"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : "Mike Bridge"
  },
  "headline": "Wormhole!  Tunnel a Firewalled Machine Onto the Web via Azure",
  "description" : "Make a web site that exists behind a firewall (or other service) available to the internet.",
  "inLanguage" : "en",
  "wordCount": 1360,
  "datePublished" : "2017-10-04T00:00:00",
  "dateModified" : "2017-10-04T00:00:00",
  "image" : "https://mikebridge.github.io/images/avatar.jpg",
  "keywords" : [ "" ],
  "mainEntityOfPage" : "https://mikebridge.github.io/post/autossh-azure-teamcity/",
  "publisher" : {
    "@type": "Organization",
    "name" : "https://mikebridge.github.io",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "https://mikebridge.github.io/images/avatar.jpg",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>

<meta property="og:title" content="Wormhole!  Tunnel a Firewalled Machine Onto the Web via Azure" />
<meta property="og:description" content="Make a web site that exists behind a firewall (or other service) available to the internet.">
<meta property="og:image" content="https://mikebridge.github.io/images/avatar.jpg" />
<meta property="og:url" content="https://mikebridge.github.io/post/autossh-azure-teamcity/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Mike Bridge - Dev Notes" />
  <meta name="twitter:title" content="Wormhole!  Tunnel a Firewalled Machine Onto the Web via Azure" />
  <meta name="twitter:description" content="Make a web site that exists behind a firewall (or other service) available to the internet.">
  <meta name="twitter:image" content="https://mikebridge.github.io/images/avatar.jpg" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@michaelbridge" />
  <meta name="twitter:creator" content="@michaelbridge" />
  <link href='https://mikebridge.github.io/images/favicon.ico' rel='icon' type='image/x-icon'/>
  <meta property="og:image" content="https://mikebridge.github.io/images/avatar.jpg" />
  <meta name="twitter:image" content="https://mikebridge.github.io/images/avatar.jpg" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@michaelbridge" />
  <meta name="twitter:creator" content="@michaelbridge" />
  <meta property="og:url" content="https://mikebridge.github.io/post/autossh-azure-teamcity/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Mike Bridge - Dev Notes" />

  <meta name="generator" content="Hugo 0.54.0" />
  <link rel="alternate" href="https://mikebridge.github.io/index.xml" type="application/rss+xml" title="Mike Bridge - Dev Notes">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="https://mikebridge.github.io/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="https://mikebridge.github.io/css/highlight.min.css" /><link rel="stylesheet" href="https://mikebridge.github.io/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-48293065-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://mikebridge.github.io">Mike Bridge - Dev Notes</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Blog" href="/">Blog</a>
            </li>
          
        

        

        
      </ul>
    </div>

    
      <div class="avatar-container">
        <div class="avatar-img-border">
          <a title="Mike Bridge - Dev Notes" href="https://mikebridge.github.io">
            <img class="avatar-img" src="https://mikebridge.github.io/images/avatar.jpg" alt="Mike Bridge - Dev Notes" />
          </a>
        </div>
      </div>
    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              
                <h1>Wormhole!  Tunnel a Firewalled Machine Onto the Web via Azure</h1>
              
              
              
              
                <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on October 4, 2017
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;7&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;1360&nbsp;words
  
  
    &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Mike Bridge
  
  
</span>


              
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        

<p>This spring I set up a Continuous Deployment pipeline on TeamCity for a DotNet Core / TypeScript / React
application which deploys to Azure.  It would have been somewhat expensive to host this CD setup in the
cloud, considering all the old unused hardware I have sitting in the office.  I didn&rsquo;t want to fiddle with the
firewall to put these machines online, but fortunately it&rsquo;s fairly easy to set up a tunnel to the outside
without needing to touch the firewall—and that&rsquo;s what I&rsquo;ll be describing here.  I have
Raspberry Pis which sit behind my ISPs&rsquo; firewalls that I&rsquo;ve had to make accessible, so I set this up
exactly the same way.  You can apply this technique to access all sorts of firewalled services without
needing to do any local network configuration at all, like controlling the heat in a remote
office à la <a href="http://www.imdb.com/title/tt4158110/">Mr. Robot</a>.</p>


<link rel="stylesheet" href="/css/hugo-easy-gallery.css" />
<div class="box fancy-figure caption-position-bottom caption-effect-fade" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/images/teamcity/MrRobot.png" alt="Circumventing the Firewall"/>
    </div>
    <a href="/images/teamcity/MrRobot.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>Circumventing the Firewall</p>
      </figcaption>
  </figure>
</div>


<p>Here&rsquo;s how this will work:</p>

<ul>
<li>An <em>Office Server</em> will sit behind a firewall and serve HTTP responses.</li>
<li>A <em>Proxy Server</em> will sit in the cloud and forward incoming HTTP traffic to the Office Server.</li>
<li>An account called &ldquo;autossh&rdquo; will exist on on each of the two servers.</li>
<li>The autossh account on the Office Server will create and maintain a &ldquo;Reverse SSH Tunnel&rdquo;
by logging into the corresponding autossh account on the Proxy Server and linking a port on the
Office Server to a port on the Office Server.  This tunnel is like a wormhole in Star
Trek&mdash;internet traffic that goes into port X on the Proxy Server comes out on port Y on the
Office Server.</li>
<li>Azure will route IP traffic to the Proxy.</li>
</ul>



<div class="box fancy-figure caption-position-bottom caption-effect-fade" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/images/teamcity/wormhole-400x250.png" alt="An SSH Tunnel"/>
    </div>
    <a href="/images/teamcity/wormhole-400x250.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>An SSH Tunnel</p>
      </figcaption>
  </figure>
</div>


<p>If you&rsquo;re a Windows administrator who&rsquo;s fairly new to Linux, I&rsquo;ve added some extra description which I hope
will reduce some of the cognitive load.</p>

<h3 id="the-office-server">The Office Server</h3>

<p>Even though I develop C# and TypeScript on Windows, it&rsquo;s now easy to compile and test my code
on Linux, so the first step was to install my favourite Linux distribution <a href="https://linuxmint.com/">Mint</a> on
one of my old machines.  If you haven&rsquo;t used Linux before, Mint has the advantage of being a
pretty standard Ubuntu distribution, but with a familiar desktop.  I&rsquo;ll call this the
&ldquo;Office Server&rdquo;, and it sits behind the firewall.</p>

<p>I&rsquo;ll write about how to set up TeamCity for DotNet Core on Linux in a future post, but for now
I will just assume that you already have a web site set up on your Office Server listening to
port 8080.</p>

<h3 id="the-proxy-server">The Proxy Server</h3>

<p>The next step is to create a &ldquo;Proxy Server&rdquo; somewhere in the cloud.  We&rsquo;ll open port 80 on this server, and
its job will be to push all HTTP traffic into the tunnel so that it arrives at our Office Server.  I
have a proxy server at <a href="https://www.digitalocean.com/">Digital Ocean</a> which is dirt-cheap to
maintain, but for ths blog post I will be describing my Azure setup.</p>

<p>I chose an Ubuntu 16.04 LTS VM in Azure.  The slowest, cheapest VM they have is enough for my
purposes, so I&rsquo;m using a &ldquo;Standard A0&rdquo; machine.  Boot this up, and log into it via SSH.</p>



<div class="box fancy-figure caption-position-bottom caption-effect-fade" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/images/teamcity/create_ubuntu_azure.png" alt="Create an Ubuntu VM"/>
    </div>
    <a href="/images/teamcity/create_ubuntu_azure.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>Create an Ubuntu VM</p>
      </figcaption>
  </figure>
</div>


<h3 id="set-up-autossh">Set up AutoSSH</h3>

<p>Log in to both the Office Server and the Proxy Server, e.g.:</p>

<pre>
$ ssh -i ~/.ssh/my_azure_rsa.pub myazureuser@1.2.3.4
</pre>

<p>On each machine, create an &ldquo;autossh&rdquo; user.  Since there shouldn&rsquo;t be user activity on ths
account after we set it up, we&rsquo;ll turn the shell off by setting it to <code>/bin/false</code>.  We&rsquo;ll
create the account and log in as autossh in the same way on each server like this:</p>

<pre>
$ sudo useradd -m -s /bin/false autossh
$ sudo su - -s /bin/bash autossh
</pre>

<p>That second line means &ldquo;log in as autossh using the bash shell, and do it via the root account&rdquo;.  (Since
we turned the shell off, we need to explicitly specify that we want to use a bash shell for this session.)  You
should now have two open terminals, one for each server.</p>

<p>On the Office server, generate an ssh keypair:</p>

<pre>
$ ssh-keygen
</pre>

<p>Just use the defaults and don&rsquo;t set a passphrase.  Copy the <code>~/.ssh/id_rsa.pub</code> public key file that you
just generated from its location on the Office Server to the Proxy Server.  You need to be careful with the
permissions&mdash;it will go in the same <code>~/.ssh</code> directory (the squiggle means &ldquo;my home directory&rdquo;).  If
you have to create it, make sure the directory has the permissions 700. (<code>chmod 700 ~/.ssh</code>).  In order
for this to work, you&rsquo;ll also need to copy <code>id_rsa.pub</code> to the file <code>authorized_keys</code> on the Proxy:</p>

<pre>
$ mkdir 
$ cd ~/.ssh
$ cp id_rsa.pub authorized_keys
</pre>

<p>At this point, you should be able to connect from your office server to your proxy server:</p>

<pre>
$ ssh autossh@1.2.3.4
</pre>

<p>You won&rsquo;t be able to log in (since you have no shell configured), but you should see &ldquo;Welcome to Ubuntu&rdquo;
before you get logged out&mdash;this means SSH is configured correctly.  If it isn&rsquo;t, try adding the <code>-v</code> flag
to the <code>ssh</code> command to debug what&rsquo;s going wrong.</p>

<p>Back on the office server, you&rsquo;ll need to install <em>autossh</em>.  This is the tool that keeps the tunnel alive.</p>

<pre>
$ sudo apt-get update
$ sudo apt-get install autossh
</pre>
 

<p>We&rsquo;re almost done with the Office server&mdash;the magic command to set up a tunnel is this:</p>

<pre>
autossh -M 0 -q -f -N -o "ServerAliveInterval 60" -o "ServerAliveCountMax 3" -R 8080:localhost:8080 autossh@1.2.3.4
</pre>
 

<p>This is an alphabet soup of flags, which you can <a href="https://linux.die.net/man/1/autossh">look up</a>, but
in general:</p>

<ul>
<li><code>-M 0</code> - turn port monitoring off.  You can monitor a port if you want, but I haven&rsquo;t found that I need to bother.</li>
<li><code>-f</code> - run in background</li>
</ul>

<p>The other flags are passed to SSH:</p>

<ul>
<li><code>-N</code> - don&rsquo;t execute a shell command via ssh, just forward the port</li>
<li><code>-q</code> - quiet mode</li>
<li><code>-o ...</code> - pass some options</li>
<li><code>-R X:localhost:Y</code> - create a tunnel the localhost port <code>X</code> on the Proxy server to port &lsquo;Y&rsquo; Office Server.</li>
</ul>

<p>At this point, you should be able to access the tunnel from the proxy server.  On the Proxy Server, you
can test this e.g.:</p>

<pre>
$ curl http://localhost:8080
=> some kind of http response
</pre>

<p>Now we need establish the route that the IP traffic will take through the Proxy server.  Set these
lines in <code>/etc/sysctl.conf</code>:</p>

<pre>
net.ipv4.ip_forward=1
net.ipv4.conf.all.route_localnet=1
</pre>

<p>To activate these new rules in the kernel, type <code>sudo sysctl -p</code>.</p>

<p>In order to access our pipeline externally, we will route external traffic from port 80 on the
Proxy Server to localhost on port 8080.  This command will connect our SSH tunnel to the
outside world:</p>

<pre>
$ sudo iptables -t nat -A PREROUTING -p tcp --dport 80 -j DNAT --to-destination 127.0.0.1:8111
</pre>

<p>At this point you should be able to access it from the Proxy Server, but using your external IP address, e.g.</p>

<pre>
$ curl http://1.2.3.4
=> some kind of http response
</pre>

<p>You can optionally enable access via local host:</p>

<pre>
$ sudo iptables -t nat -A OUTPUT -p tcp --dport 80 -j REDIRECT --to-port 8111
$ curl http://localhost
=> some kind of http response
</pre> 

<p>At this point, your two servers should be communicating, but the iptables and autossh commands
will be lost on reboot.  On the Proxy Server, you could use something fancy like <code>iptables-save</code> to
persist the iptables settings, but I generally don&rsquo;t bother&mdash;I just add the two iptables commands
into <code>/etc/rc.local</code> which runs on boot.  Similarly, I make <code>autossh</code> run at boot time by adding
this to <code>/etc/rc.local</code> on the office server:</p>

<pre>
sudo su -s /bin/sh autossh -c 'autossh -M 0 -q -f -N -o "ServerAliveInterval 60" \
    -o "ServerAliveCountMax 3" -R 8080:localhost:8080 autossh@1.2.3.4'
</pre>

<h3 id="azure">Azure</h3>

<p>The last thing to do is to configure Azure.  Booting an Ubuntu instance creates
a &ldquo;Network Interface&rdquo; and an &ldquo;NSG&rdquo; or Network Security Group for you.  You just
need to</p>

<ul>
<li>Set the Network interface&rsquo;s IP address to &ldquo;Static&rdquo;</li>
<li>Configure the NSG to allow traffic to port 80</li>
</ul>



<div class="box fancy-figure caption-position-bottom caption-effect-fade" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/images/teamcity/config_network.png" alt="Configure Azure&#39;s Firewall"/>
    </div>
    <a href="/images/teamcity/config_network.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>Configure Azure&#39;s Firewall</p>
      </figcaption>
  </figure>
</div>


<p>(I also have port 443 configured.)</p>

<p>With luck, your web site should now be accessible to the web.  If you reboot both machines, they
should also automatically re-establish the connection.</p>

<p>Coming up in this series: <em>Set up TeamCity for DotNet Core</em>; <em>Continuous Deployment of DotNet Core
to Azure via GitHub</em>.</p>


        

        
            <hr/>
            <section id="social-share">
              <div class="list-inline footer-links">
                

<div class="share-box" aria-hidden="true">
    <ul class="share">
      
      <li>
        <a href="//twitter.com/share?url=https%3a%2f%2fmikebridge.github.io%2fpost%2fautossh-azure-teamcity%2f&amp;text=Wormhole%21%20%20Tunnel%20a%20Firewalled%20Machine%20Onto%20the%20Web%20via%20Azure&amp;via=michaelbridge" target="_blank" title="Share on Twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//plus.google.com/share?url=https%3a%2f%2fmikebridge.github.io%2fpost%2fautossh-azure-teamcity%2f" target="_blank" title="Share on Google Plus">
          <i class="fab fa-google-plus"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fmikebridge.github.io%2fpost%2fautossh-azure-teamcity%2f" target="_blank" title="Share on Facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//reddit.com/submit?url=https%3a%2f%2fmikebridge.github.io%2fpost%2fautossh-azure-teamcity%2f&amp;title=Wormhole%21%20%20Tunnel%20a%20Firewalled%20Machine%20Onto%20the%20Web%20via%20Azure" target="_blank" title="Share on Reddit">
          <i class="fab fa-reddit"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fmikebridge.github.io%2fpost%2fautossh-azure-teamcity%2f&amp;title=Wormhole%21%20%20Tunnel%20a%20Firewalled%20Machine%20Onto%20the%20Web%20via%20Azure" target="_blank" title="Share on LinkedIn">
          <i class="fab fa-linkedin"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fmikebridge.github.io%2fpost%2fautossh-azure-teamcity%2f&amp;title=Wormhole%21%20%20Tunnel%20a%20Firewalled%20Machine%20Onto%20the%20Web%20via%20Azure" target="_blank" title="Share on StumbleUpon">
          <i class="fab fa-stumbleupon"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fmikebridge.github.io%2fpost%2fautossh-azure-teamcity%2f&amp;description=Wormhole%21%20%20Tunnel%20a%20Firewalled%20Machine%20Onto%20the%20Web%20via%20Azure" target="_blank" title="Share on Pinterest">
          <i class="fab fa-pinterest"></i>
        </a>
      </li>
    </ul>
  </div>
  
              </div>
            </section>
        

        
          
          
        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="https://mikebridge.github.io/post/csharp-domain-event-aggregator/" data-toggle="tooltip" data-placement="top" title="An Rx Event Aggregator in C#">&larr; Previous Post</a>
            </li>
          
          
            <li class="next">
              <a href="https://mikebridge.github.io/post/azure-active-directory-elastic-pool/" data-toggle="tooltip" data-placement="top" title="Azure Active Directory with Azure SQL">Next Post &rarr;</a>
            </li>
          
        </ul>
      


      
        
          
          <div class="disqus-comments">                  
            <button id="show-comments" class="btn btn-default" type="button">Show <span class="disqus-comment-count" data-disqus-url="https://mikebridge.github.io/post/autossh-azure-teamcity">comments</span></button>
            <div id="disqus_thread"></div>

            <script type="text/javascript">
              var disqus_config = function () {
              this.page.url = 'https:\/\/mikebridge.github.io\/post\/autossh-azure-teamcity';
            };

          </script>
          </div>
          
        
        
      

    </div>
  </div>
</div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="mailto:mike@bridgecanada.com" title="Email me">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://github.com/mikebridge" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://twitter.com/michaelbridge" title="Twitter">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://linkedin.com/in/mikelbridge" title="LinkedIn">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://stackoverflow.com/users/267280/mikebridge" title="StackOverflow">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-stack-overflow fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://www.instagram.com/mikebridge70" title="Instagram">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-instagram fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://open.spotify.com/user/mikelbridge" title="Spotify">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-spotify fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            
            <a href="https://mikebridge.github.io/index.xml" title="RSS">
            
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              Mike Bridge
            
          

          &nbsp;&bull;&nbsp;&copy;
          
            2019
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://mikebridge.github.io">Mike Bridge - Dev Notes</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.54.0</a> powered &nbsp;&bull;&nbsp; Theme by <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a> adapted to <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a>
          
        </p>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://mikebridge.github.io/js/main.js"></script>
<script src="https://mikebridge.github.io/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> $(document).ready(function() {$("pre.chroma").css("padding","0");}); </script><script> renderMathInElement(document.body); </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script>
<script src="https://mikebridge.github.io/js/load-photoswipe.js"></script>







<script type="text/javascript">
$(function(){
  $('#show-comments').on('click', function(){
    var disqus_shortname = 'mikebridge-github-io';
      
    (function() {
      var disqus = document.createElement('script'); 
      disqus.type = 'text/javascript'; 
      disqus.async = true;
      disqus.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(disqus);
    })();
      
    $(this).hide(); 
    });
  });
      
</script>
<script id="dsq-count-scr" src="//mikebridge-github-io.disqus.com/count.js" async></script>




  </body>
</html>

